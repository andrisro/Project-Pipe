<div class="main-div">
    <mat-card class="example-card">
    <mat-card-header>
      <mat-card-title>Registration</mat-card-title>
    </mat-card-header>
    <mat-card-content>


      <form class="registration-form"  #captchaProtectedForm="ngForm">
        <label class="registration-label-divider">Persönliche Daten</label>

        <mat-form-field class="registration-float-width">
          <input matInput placeholder="Name" name="lastName" [(ngModel)]="user.lastName" value="">
        </mat-form-field>

        <mat-form-field class="registration-float-width">
          <input matInput placeholder="Vorname" name="firstName" [(ngModel)]="user.firstName" value="">
        </mat-form-field>

        <mat-form-field class="registration-float-width">
          <input matInput placeholder="PLZ" name="zip" [(ngModel)]="user.zip" value="">
        </mat-form-field>

        <mat-form-field class="registration-float-width">
          <input matInput placeholder="Ort" name="city" [(ngModel)]="user.city" value="">
        </mat-form-field>

        <mat-form-field class="registration-float-width">
          <input matInput placeholder="Straße" name="street" [(ngModel)]="user.street" value="">
        </mat-form-field>

        <mat-form-field class="registration-float-width">
          <input matInput placeholder="Land" name="country" [(ngModel)]="user.country" value="">
        </mat-form-field>

        <mat-form-field class="registration-float-width">
          <input matInput placeholder="Telefon" name="telephone" [(ngModel)]="user.telephone" value="">
        </mat-form-field>

        <mat-form-field class="registration-float-width">
          <input matInput placeholder="E-Mail" name="email" [(ngModel)]="user.email" value="" email>
        </mat-form-field>

        <label class="registration-label-divider">Login-Daten</label>

        <mat-form-field class="registration-full-width">
          <input matInput placeholder="UserName" name="userName" [(ngModel)]="user.loginName" value="">
        </mat-form-field>

        <mat-form-field class="registration-full-width">
          <input matInput type="password" name="password" [(ngModel)]="user.password" placeholder="Passwort" value = "">
        </mat-form-field>

        <mat-form-field class="registration-full-width">
          <input matInput type="password" name="passwordConfirmation"[(ngModel)]="user.passwordConfirmation" placeholder="Passwort bestätigen" value = "">
        </mat-form-field>

        <mat-progress-bar class="registration-full-width" mode="determinate" [value]="getSecurityLevelPassword()/4*100" [color]="getProgressBarColor(getSecurityLevelPassword())"></mat-progress-bar>

        <div *ngIf="isNoFieldEmpty()">
          <mat-error *ngIf="!isPasswordConfirmationValid()">Die Passwörter müssen übereinstimmen.</mat-error>
          <mat-error *ngIf="getSecurityLevelPassword()<=1">Die Passwörter müssen mindestens 6 Zeichen lang sein und Großbuchstaben, sowie Sonderzeichen enthalten. Dein Vorname, Nachname oder Login-Name darf im Passwort nicht vorkommen.</mat-error>
        </div>

        <mat-error *ngIf="checkLogin == false">
          LogIn name already exists!<br />
          <img style="margin-top: 1em; height:20em; width: 20em" src="https://media3.giphy.com/media/kyHUOat3LQkXS/giphy.gif?cid=790b76115cf0f93764444e314171a3f9&rid=giphy.gif" />
        </mat-error>

        <re-captcha class="registration-captcha" [(ngModel)]="formModel.captcha" name="captcha" required siteKey="6LdAf6YUAAAAAJGjRhexi2Tk337uzPhvW9IhOAi-" #captchaControl="ngModel"></re-captcha>

        <div *ngIf="isNoFieldEmpty()">
          <mat-error *ngIf="captchaControl.valid || captchaControl.pristine">Captcha must be solved</mat-error>
          <mat-error [hidden]="!captchaControl.valid" class="success">Captcha is invalid</mat-error>
        </div>

        <mat-error *ngIf="!isNoFieldEmpty()">The form must be filled out</mat-error>

        <button mat-raised-button [disabled]="getSecurityLevelPassword() <= 3 || !isPasswordConfirmationValid() ||!isNoFieldEmpty() || captchaControl.valid" (click)="registration()">Registrieren</button>
      </form>
    </mat-card-content>
  </mat-card>
</div>
